# CV-Hub Secrets Template for DigitalOcean Deployment
# Copy to secrets.yaml, fill in real values, and apply:
#   kubectl apply -f secrets.yaml
#
# Generate random secrets with:
#   openssl rand -base64 32
#
# DO NOT commit secrets.yaml to version control!

apiVersion: v1
kind: Secret
metadata:
  name: cv-hub-secrets
  namespace: cv-hub
type: Opaque
stringData:
  # ── Database ──────────────────────────────────────────
  postgres-user: "cvhub"
  postgres-password: "<openssl rand -base64 24>"
  database-url: "postgresql://cvhub:<same-password>@postgres:5432/cvhub"

  # ── Redis / Graph / Vector ────────────────────────────
  redis-url: "redis://redis:6379"
  falkordb-url: "redis://falkordb:6379"
  qdrant-url: "http://qdrant:6333"

  # ── Auth Secrets ──────────────────────────────────────
  # Each should be a unique random value
  session-secret: "<openssl rand -base64 32>"
  jwt-secret: "<openssl rand -base64 32>"
  jwt-access-secret: "<openssl rand -base64 32>"
  jwt-refresh-secret: "<openssl rand -base64 32>"
  csrf-secret: "<openssl rand -base64 32>"
  mfa-encryption-key: "<openssl rand -base64 32>"

  # ── External Services ─────────────────────────────────
  openrouter-api-key: "<your-openrouter-api-key>"

  # ── OAuth (optional, leave empty to disable) ──────────
  github-client-id: ""
  github-client-secret: ""

  # ── S3-Compatible Object Storage (DO Spaces) ─────────
  s3-endpoint: "https://nyc3.digitaloceanspaces.com"
  s3-bucket: "cv-hub-assets"
  s3-access-key: "<your-spaces-access-key>"
  s3-secret-key: "<your-spaces-secret-key>"
  s3-region: "nyc3"

---
# Backup credentials (separate secret for CronJobs)
apiVersion: v1
kind: Secret
metadata:
  name: backup-spaces-credentials
  namespace: cv-hub
type: Opaque
stringData:
  access-key: "<your-spaces-access-key>"
  secret-key: "<your-spaces-secret-key>"
  endpoint: "https://nyc3.digitaloceanspaces.com"
  bucket: "cv-hub-backups"

---
# DigitalOcean Container Registry pull secret
# Create with: doctl registry kubernetes-manifest | kubectl apply -f -
# Or manually:
#   kubectl -n cv-hub create secret docker-registry registry-cv-hub-registry \
#     --docker-server=registry.digitalocean.com \
#     --docker-username=<token> \
#     --docker-password=<token>
